# jicanicle ドキュメント管理ルール

jicanicle プロジェクトにおけるドキュメント管理のルールは以下の通りです：

## 更新履歴

| 日付 | 更新者 | 内容 |
|------|--------|------|
| 2025-03-10 | 開発チーム | ドキュメント構造のリファクタリングに伴う更新 |
| 2025-03-10 | 開発チーム | 技術ドキュメントの整理と詳細構造の更新 |

## 基本原則

1. 全てのドキュメントは `docs` ディレクトリに集約する
2. 設計ドキュメントは Markdown 形式で作成・管理する
3. 命名規則：日本語ファイル名は許容するが、ファイル名にはスペースではなくアンダースコア (\_) を使用する
4. 参照関係のあるドキュメント同士は相互リンクを明記する
5. 更新履歴を各ドキュメントの冒頭または末尾に記録する

## ディレクトリ構造

```
docs/
├── architecture/         # アーキテクチャ関連ドキュメント
│   ├── overview.md       # アーキテクチャ概要
│   └── decisions/        # 設計決定記録（ADR）
│       └── *.md          # 個別の設計決定記録
├── domain/               # ドメイン固有のドキュメント
│   └── {ドメイン名}/     # 各ドメインのディレクトリ
│       ├── design.md     # ドメイン設計
│       ├── design-reviews/ # 設計レビュー
│       │   └── *.md      # 個別の設計レビュー
│       ├── implementation.md # 実装詳細
│       ├── infrastructure.md # インフラストラクチャ実装
│       └── status.md     # 実装状況・ロードマップ
├── guidelines/           # 技術的ガイドライン
│   ├── code-quality/     # コード品質関連ガイドライン
│   │   └── *.md          # ESLint、テスト等のガイドライン
│   ├── state-management/ # 状態管理関連ガイドライン
│   │   └── *.md          # 状態管理ライブラリや設計パターン
│   └── technical/        # その他技術的な詳細ガイドライン
│       └── *.md          # 個別のガイドライン
├── project/              # プロジェクト全体のドキュメント
│   ├── roadmap.md        # プロジェクトロードマップ
│   ├── status.md         # プロジェクト現状
│   └── tasks/            # 個別タスク関連
│       └── *.md          # 特定タスクの計画や実装詳細
├── technical/            # 技術的な詳細（旧構造・非推奨）
├── user/                 # ユーザー向けドキュメント
│   └── *.md              # 機能ガイドなど
└── design/               # 旧構造ディレクトリ（非推奨）
```

## 主要ドキュメント

- `project/roadmap.md` - プロジェクト全体のロードマップ
- `project/status.md` - プロジェクト現状と優先タスク
- `architecture/overview.md` - アーキテクチャ概要
- `architecture/decisions/task-deletion-strategy.md` - タスク削除戦略ADR
- `architecture/decisions/esmodule-adoption.md` - ESModule採用ADR
- `domain/task/design.md` - タスク管理ドメイン設計
- `domain/task/implementation.md` - タスク管理ドメイン実装詳細
- `domain/task/status.md` - タスク管理ドメイン実装状況
- `domain/task/infrastructure.md` - タスク管理ドメインのインフラストラクチャ実装
- `guidelines/technical/zod-schema-implementation.md` - Zodスキーマ実装ガイドライン
- `guidelines/state-management/overview.md` - 状態管理設計ガイド
- `guidelines/code-quality/test-naming-convention.md` - テスト命名規則
- `directory_structure.md` - プロジェクトのディレクトリ構造とファイル説明
- `user/task-management.md` - タスク管理機能ユーザーガイド

## ドキュメントタイプ

### 1. 設計決定記録 (ADR)

Architecture Decision Record（設計決定記録）は、重要な設計決定を記録するためのドキュメントです。

**命名規則**: `{決定事項}.md` (例: `task-deletion-strategy.md`)

**格納場所**: `docs/architecture/decisions/`

**構成**:

- タイトル（設計決定の概要）
- ステータス（提案中、承認済み、却下、廃止など）
- 日付
- 背景（決定が必要になった背景）
- 決定（選択した解決策）
- 根拠（なぜその決定を選んだのか）
- 影響（その決定による影響）

**更新方針**:

- ADR は基本的に不変。新しい決定は新しい ADR として記録する
- ステータスの変更のみ更新可能

### 2. ドメイン設計

ドメインの概念モデルと設計方針を記述するドキュメントです。

**命名規則**: `design.md`

**格納場所**: `docs/domain/{ドメイン名}/`

**構成**:

- ドメインの概要
- 主要エンティティと値オブジェクト
- 集約の定義
- リポジトリとサービス
- ドメインルール
- 関連コンテキストとの関係

**更新方針**:

- ドメインの概念モデルに変更があった場合に更新
- 大きな設計変更は事前にレビューを受ける

### 3. 設計レビュー

特定の機能や実装に関する設計レビューの記録です。

**命名規則**: `{機能名}.md` (例: `update.md`, `deletion.md`)

**格納場所**: `docs/domain/{ドメイン名}/design-reviews/`

**構成**:

- レビュー対象の概要
- 現在の設計状況
- 検討事項と課題
- 改善提案
- 結論と次のステップ

**更新方針**:

- レビュー内容は基本的に不変
- フォローアップがある場合は追記

### 4. ドメイン実装状況

ドメインの実装状況と今後の計画を記録するドキュメントです。

**命名規則**: `status.md`

**格納場所**: `docs/domain/{ドメイン名}/`

**構成**:

- 実装経過（完了したフェーズ）
- 成果物と主要なメトリクス
- 今後のロードマップ（予定フェーズ）
- 技術的負債と改善項目
- 学んだ教訓

**更新方針**:

- 実装フェーズの完了時に更新
- 四半期ごとに見直し、必要に応じて計画を調整

### 5. 実装詳細ドキュメント

特定の機能やドメインの具体的な実装詳細を記録するドキュメントです。

**命名規則**: `implementation.md`

**格納場所**: `docs/domain/{ドメイン名}/`

**構成**:

- 実装の概要
- 型定義とインターフェース
- 主要なロジックとアルゴリズム
- テスト戦略

**更新方針**:

- 実装の大幅な変更があった場合に更新
- コード変更と同じプルリクエストで更新することが望ましい

### 6. インフラストラクチャ実装

ドメインのインフラストラクチャ層の実装詳細を記録するドキュメントです。

**命名規則**: `infrastructure.md`

**格納場所**: `docs/domain/{ドメイン名}/`

**構成**:

- リポジトリ実装の詳細
- 外部サービスとの連携
- データモデルとマッピング
- パフォーマンスと最適化

**更新方針**:

- インフラストラクチャ実装の変更時に更新
- 新しいリポジトリ実装の追加時に更新

### 7. コード品質ガイドライン

コード品質に関するガイドラインを記述するドキュメントです。

**命名規則**: `{トピック名}.md` (例: `eslint-configuration.md`, `test-naming-convention.md`)

**格納場所**: `docs/guidelines/code-quality/`

**構成**:

- ガイドラインの目的
- 具体的なルールと例
- ツールの設定方法
- 例外的な対応

**更新方針**:

- ルールや設定の変更時に更新
- 新しいツールの導入時に更新

### 8. 状態管理ガイドライン

状態管理に関するガイドラインを記述するドキュメントです。

**命名規則**: `{トピック名}.md` (例: `overview.md`, `zustand-implementation.md`)

**格納場所**: `docs/guidelines/state-management/`

**構成**:

- 状態管理の原則
- ライブラリの選定と評価
- 実装パターンと例
- ドメインモデルとの統合方法

**更新方針**:

- 状態管理アプローチの変更時に更新
- 新しいパターンや知見の発見時に更新

### 9. 技術ガイドライン

特定の技術や実装パターンに関するガイドラインを記述するドキュメントです。

**命名規則**: `{トピック名}.md`

**格納場所**: `docs/guidelines/technical/`

**構成**:

- ガイドラインの概要と目的
- 基本原則
- 実装パターンと例
- ベストプラクティス
- よくある問題と解決策

**更新方針**:

- 新しい知見や実装パターンが確立された場合に更新
- プロジェクト全体に影響する技術的変更があった場合に更新

### 10. プロジェクトタスク

特定のプロジェクトタスクの計画と実装詳細を記録するドキュメントです。

**命名規則**: `{タスク名}.md` (例: `linter-fixes.md`)

**格納場所**: `docs/project/tasks/`

**構成**:

- タスクの目的と背景
- 実装計画
- 変更範囲
- 検証方法
- 完了基準

**更新方針**:

- タスクの進捗に応じて更新
- タスク完了時に最終状態を記録

### 11. プロジェクト構造ドキュメント

プロジェクト全体のディレクトリ構造とファイル構成を説明するドキュメントです。

**命名規則**: `directory_structure.md`

**格納場所**: `docs/`

**構成**:

- プロジェクト概要
- ディレクトリ構造の図表表現
- 主要ファイルの説明
- 実装状況
- 使用技術とライブラリ
- 設計原則

**更新方針**:

- 新しいディレクトリや重要なファイルが追加された場合に更新
- プロジェクト構造の大幅な変更があった場合に更新
- 定期的に（四半期ごと）最新の状態と一致しているか確認

### 12. ユーザーガイド

エンドユーザー向けの機能説明ドキュメントです。

**命名規則**: `{機能名}.md`

**格納場所**: `docs/user/`

**構成**:

- 機能の概要
- 使用方法
- よくある質問（FAQ）
- トラブルシューティング

**更新方針**:

- 機能の追加・変更があった場合に更新
- リリース前に必ず最新情報に更新

## メンテナンス

- ドキュメントの更新は、関連するコード変更と同じプルリクエストで行うことが望ましい
- 大きな設計変更を行う場合は、ドキュメント更新を先に行い、レビューを受ける
- 四半期ごとにドキュメント全体の見直しを行い、古くなった情報を更新する

## 命名規則

- ファイル名は機能や目的を明確に示す
- 日付を含める場合は `YYYY-MM-DD_` の形式で先頭に配置
- バージョン番号を含める場合は `_vX.Y` の形式で末尾に配置
- ドキュメントタイプによって適切な命名を行う

## ドキュメント間の相互参照

- マークダウンの相対リンク記法を使用して相互参照する
  ```markdown
  [タスク管理ドメイン設計](../../domain/task/design.md)
  ```
- 同じドキュメント内の見出しへの参照も活用する
  ```markdown
  [実装の概要](#1-実装の概要)
  ```
- 「関連ドキュメント」セクションを各ドキュメントの末尾に配置し、関連ドキュメントへのリンクを提供する

## レビュープロセス

- 技術ドキュメントは少なくとも 1 名のレビューを受ける
- ユーザードキュメントは技術者以外のレビューも受けることが望ましい
- ADR は設計に関わる全メンバーのレビューと承認を得る
