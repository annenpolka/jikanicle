# jikanicle 核となる機能要件・仕様

## 更新履歴

| 日付 | 更新者 | 内容 |
|------|--------|------|
| 2025-03-10 | 開発チーム | 初版作成：核となる機能要件・仕様の抽出と整理 |
| 2025-03-11 | 開発チーム | 更新：完全リブート方針への転換の反映 |

## 1. はじめに

このドキュメントは、jikanicleプロジェクトの核となる機能要件・仕様を整理したものです。現在の技術的課題（TUIのテスト困難性、Reactの複雑なコンテキスト依存、過度に複雑化したアーキテクチャ）を根本的に解決するため、**既存コードを完全に廃止し**、機能指向アーキテクチャによる再実装を行うことを決定しました。このドキュメントでは「何を実現すべきか」という観点で情報を構造化し、一から再設計・実装するための基礎として活用します。

## 2. 核となる価値提案

jikanicleの核となる価値提案は以下の通りです：

**「ユーザーがタスクを入力するだけで、AIが所要時間を予測し、最適なタイムブロックを自動生成。ユーザーは実際の作業時間を計測するだけで、効率的なタイムマネジメントを実現できる」**

この価値提案を実現するための本質的な機能要件を以下に整理します。

## 3. 機能モジュールと核機能

jikanicleアプリケーションは、以下の4つの機能モジュールで構成されます。各モジュールの核となる機能要件を示します。

### 3.1 タスク管理モジュール

**本質的な責務**: ユーザーのタスクを管理し、そのライフサイクルを追跡する

#### 核となる機能

1. **タスクの作成・保存**
   - ユーザーがタスク名と説明（オプション）を入力できる
   - 作成したタスクがシステムに永続化される
   - 各タスクには一意のIDが付与される

2. **タスク情報の管理**
   - タスクの基本属性（ID、名前、説明、カテゴリ、状態など）の保持
   - タスクの状態遷移（未開始→進行中→完了）の管理
   - タスクの予測時間と実績時間の管理

3. **タスクの検索・フィルタリング**
   - 複数条件（カテゴリ、状態、優先度など）での検索
   - 作成日順、優先度順などでのソート

#### 実現に不可欠な機能

- タスクデータの永続化と読み込み
- タスク状態の更新機能
- タスクのCRUD操作のインターフェース

### 3.2 タイムブロックモジュール

**本質的な責務**: タスクをスケジュール上の時間枠に最適に配置する

#### 核となる機能

1. **タイムブロックの自動生成**
   - タスクの予測時間に基づいて最適なタイムブロックを生成
   - ユーザーが指定した時間枠（例：9:00-17:00）内に収まるようスケジュール
   - タスク間に適切な休憩を挿入

2. **スケジュールの視覚化**
   - 生成されたタイムブロックをタイムライン形式で表示
   - 現在のタイムブロックを強調表示
   - タスクのカテゴリごとに色分け表示

3. **スケジュールの調整**
   - タイムブロックの手動での調整（開始時間の変更など）
   - スケジュールのリバランス（空き時間の最適活用）

#### 実現に不可欠な機能

- スケジュール生成アルゴリズム
- タイムブロックとタスクの関連付け
- タイムブロックデータの永続化

### 3.3 タイムトラッキングモジュール

**本質的な責務**: タスクの実行時間を記録し、予測と実績を比較可能にする

#### 核となる機能

1. **タスク実行の時間計測**
   - タスク開始・一時停止・再開・完了の操作
   - 実行中タスクの経過時間のリアルタイム表示
   - 休憩時間の記録

2. **実績データの記録**
   - 実際の所要時間の記録と保存
   - 予測時間と実績時間の差異の計算
   - タスク完了時の統計情報の提供

3. **分析とレポート**
   - カテゴリ別の時間配分の分析
   - 予測精度の統計（カテゴリ別、時間帯別など）
   - 生産性傾向の可視化

#### 実現に不可欠な機能

- タイマー機能
- トラッキングセッションの管理
- セッションと休憩の記録と計算

### 3.4 AI予測モジュール

**本質的な責務**: タスクの所要時間とカテゴリを予測し、学習によって精度を向上させる

#### 核となる機能

1. **タスク所要時間の予測**
   - タスク名と説明からの所要時間予測
   - 過去の類似タスクからの学習に基づく予測
   - 予測の信頼度レベルの提供

2. **タスクカテゴリの予測**
   - タスク名と説明からのカテゴリ分類
   - ユーザーパターンに基づくカテゴリ推奨

3. **フィードバックループと学習**
   - 予測結果に対するユーザーフィードバックの収集
   - 実績データを基にした予測モデルの更新
   - ユーザー固有のパターン学習

#### 実現に不可欠な機能

- 予測アルゴリズム
- フィードバックデータの管理
- モデル更新メカニズム

## 4. モジュール間の本質的な連携

各機能モジュール間の連携における本質的な要素は以下の通りです：

### 4.1 タスク管理 ↔ タイムブロック

- **連携の本質**: タスクの基本情報とタイムブロックの紐付け
- **必要な情報交換**:
  - タスク管理からタイムブロックへ: タスクID、名前、予測時間、優先度
  - タイムブロックからタスク管理へ: スケジュール状態（予定/進行中/完了）

### 4.2 タスク管理 ↔ タイムトラッキング

- **連携の本質**: タスクの実行状態と実績時間の管理
- **必要な情報交換**:
  - タスク管理からタイムトラッキングへ: タスクID、名前、予測時間
  - タイムトラッキングからタスク管理へ: 実績時間、状態変更

### 4.3 タスク管理 ↔ AI予測

- **連携の本質**: タスク情報に基づく予測と、予測結果の適用
- **必要な情報交換**:
  - タスク管理からAI予測へ: タスク名、説明
  - AI予測からタスク管理へ: 予測時間、推奨カテゴリ、信頼度

### 4.4 タイムトラッキング ↔ AI予測

- **連携の本質**: 実績データを基にした予測モデルの改善
- **必要な情報交換**:
  - タイムトラッキングからAI予測へ: タスクID、実績時間、ユーザーフィードバック
  - AI予測からタイムトラッキングへ: 予測精度の統計情報

## 5. ユーザー体験の本質

効果的なタイムマネジメントを実現するためのjikanicleの本質的なユーザー体験は以下の通りです：

### 5.1 シンプルな操作フロー

1. **タスク入力**: ユーザーはタスク名と説明（オプション）を入力するだけで良い
2. **予測と分類**: システムが自動的に所要時間を予測し、カテゴリを提案
3. **スケジュール確認**: 生成されたタイムブロックをタイムライン上で確認
4. **タスク実行**: 開始・停止・完了などのシンプルな操作でタスクを実行
5. **フィードバック**: 必要に応じて予測に対するフィードバックを提供

### 5.2 本質的なインタラクションモデル

- **最小限の入力で最大の価値**: ユーザー入力を最小限に抑え、AIが支援
- **非同期操作**: タスク入力と実行が異なるタイミングでも問題なく機能
- **継続的な学習**: 使用するほどに精度が向上する自己改善システム
- **コンテキスト認識**: 現在の作業状況を理解し、適切なアクションを提案

## 6. 核となる機能セットと最小実装モデル

jikanicleの本質的な価値を実現するための最小実装モデル（Minimum Viable Product）を以下に示します：

### 6.1 必須機能（MVP）

1. **基本的なタスク管理**
   - タスク作成・編集・削除
   - タスク状態管理（未開始/進行中/完了）
   - 基本的なタスク属性（名前、説明、カテゴリ、予測時間）

2. **シンプルなAI予測機能**
   - タスク名からの所要時間予測
   - 基本的なカテゴリ分類
   - ユーザーフィードバックの収集

3. **基本的なタイムブロッキング**
   - 予測時間に基づくタイムブロック生成
   - シンプルなタイムライン表示
   - 現在のタスクのハイライト

4. **基本的なタイムトラッキング**
   - タスク開始・完了の記録
   - 実績時間の計測と保存
   - 予測と実績の簡易比較

### 6.2 拡張機能（段階的に追加）

1. **高度なタスク管理**
   - タグやラベルによる詳細分類
   - 優先度の設定と管理
   - 依存関係の定義

2. **高度なAI予測**
   - コンテキスト認識型の予測
   - ユーザー固有パターンの学習
   - 複数要素を考慮した信頼度計算

3. **高度なタイムブロッキング**
   - 制約条件に基づく最適化
   - ドラッグアンドドロップによる調整
   - 複数日程のスケジュール管理

4. **高度なタイムトラッキング**
   - 詳細な分析とレポート
   - 休憩時間の自動検出
   - 生産性パターンの分析

## 7. 機能指向アーキテクチャの採用

既存コードを完全に廃止し、以下の方針で機能指向アーキテクチャに基づいた再実装を行います：

### 7.1 機能モジュール化

- 技術レイヤーではなく、ユーザー価値を提供する機能単位での分割
- 各機能モジュール内で関連するコードをコロケーション（同一場所に配置）
- 明確なモジュール間インターフェースの定義

### 7.2 シンプルなモデル設計

- 最小限の概念と型定義に集中
- 過度な抽象化を避け、理解しやすさを優先
- モジュール間の依存関係を明示的かつ最小限に

### 7.3 実装の柔軟性

- UIレイヤーの実装技術からの独立
- ストレージメカニズムの抽象化
- AIコンポーネントの実装方法を柔軟に変更可能に

## 8. まとめ

jikanicleプロジェクトの本質的な価値は、「AI支援によるシンプルかつ効果的なタイムマネジメント」にあります。このドキュメントでは、この価値を実現するための核となる機能要件を整理しました。

完全リブートにあたり、既存コードは廃止し、これらの機能要件を機能指向アーキテクチャに基づいて一から再実装します。各機能モジュールの責務を明確にし、モジュール間の連携を最小化することで、シンプルで保守性の高いアプリケーションを実現します。

## 関連ドキュメント

- [核となる機能要件分析](./core-requirements-analysis.md)
- [アーキテクチャ再設計提案](./architecture-redesign-proposal.md)
- [軽量進化型アプローチの提案](./lightweight-evolution-approach.md)
- [リブート分析概要](./reboot-analysis-summary.md)
- [実装計画](./conclusion-implementation-plan.md)