# jikanicle リブート検討分析 概要

## 更新履歴

| 日付 | 更新者 | 内容 |
|------|--------|------|
| 2025-03-10 | 開発チーム | 初版作成：リブート検討分析の概要と統合 |

## 1. はじめに

jikanicleプロジェクトは現在、いくつかの技術的課題（TUIのテスト困難性、Reactの複雑なコンテキスト依存、過度に複雑化したアーキテクチャ）に直面しています。本ドキュメントは、これらの課題を解決するためのリブート検討の一環として実施した分析と提案の全体像をまとめたものです。

## 2. 分析と提案の構成

リブート検討は以下の3つの段階で実施し、各段階の成果物としてドキュメントを作成しました：

1. **核となる機能要件の分析** ([core-requirements-analysis.md](./core-requirements-analysis.md))
   - タスクの目的と背景
   - 情報収集と分析の計画
   - リブート検討の方針

2. **核となる機能要件・仕様の抽出と整理** ([core-features-requirements.md](./core-features-requirements.md))
   - 本質的な価値提案の明確化
   - 各バウンデッドコンテキストの核機能の整理
   - コンテキスト間連携の本質的要素の特定
   - 最小実装モデル（MVP）の定義

3. **アーキテクチャ再設計の提案** ([architecture-redesign-proposal.md](./architecture-redesign-proposal.md))
   - 現状の課題の詳細分析
   - 再設計の原則とアプローチの提案
   - 新アーキテクチャの概要と詳細設計
   - 段階的移行戦略の提案

これらのドキュメントは、「何を実現すべきか」という機能要件の本質を明確にした上で、「どのように実現すべきか」というアーキテクチャの方向性を示すという流れで構成されています。

## 3. 主要な発見と提案

### 3.1 本質的な価値提案

jikanicleの核となる価値提案は以下に集約されます：

**「ユーザーがタスクを入力するだけで、AIが所要時間を予測し、最適なタイムブロックを自動生成。ユーザーは実際の作業時間を計測するだけで、効率的なタイムマネジメントを実現できる」**

この価値提案を実現するために必要な本質的な機能セットを明確化しました。

### 3.2 4つの核となるバウンデッドコンテキスト

プロジェクトは以下の4つのバウンデッドコンテキストに整理され、それぞれの本質的な責務が明確になりました：

1. **タスク管理コンテキスト**
   - タスクの作成・保存、情報管理、検索・フィルタリング

2. **タイムブロッキングコンテキスト**
   - タイムブロックの自動生成、スケジュールの視覚化、スケジュールの調整

3. **タイムトラッキングコンテキスト**
   - タスク実行の時間計測、実績データの記録、分析とレポート

4. **AI予測コンテキスト**
   - タスク所要時間の予測、タスクカテゴリの予測、フィードバックループと学習

### 3.3 アーキテクチャ再設計の方向性

現在の技術的課題を解決するための新しいアーキテクチャとして、以下のアプローチを提案しました：

1. **ヘキサゴナルアーキテクチャ**（ポートとアダプター）の採用
   - ドメインロジックの独立性確保
   - 外部依存の抽象化
   - テスト容易性の向上

2. **関数型アプローチとイベント駆動設計**
   - 不変性と純粋関数による予測可能性
   - イベントによるコンテキスト間の疎結合な連携
   - モジュール性と拡張性の向上

3. **明確なレイヤー構造**
   - ドメイン、アプリケーション、インフラストラクチャ、UIの明確な分離
   - 内側に向かう依存関係の一貫性
   - 各レイヤーの責務の明確化

## 4. リブートに向けた推奨アプローチ

### 4.1 最小実装モデル（MVP）の採用

リブートに際しては、以下の最小実装モデルに集中することを推奨します：

1. **基本的なタスク管理**
   - タスク作成・編集・削除
   - 状態管理と基本属性

2. **シンプルなAI予測機能**
   - 所要時間予測と基本的なカテゴリ分類
   - フィードバック収集の仕組み

3. **基本的なタイムブロッキング**
   - タイムブロック生成とシンプルな表示
   - 現在タスクのハイライト

4. **基本的なタイムトラッキング**
   - タスク開始・完了の記録
   - 実績時間の計測と保存

### 4.2 段階的な移行戦略

新アーキテクチャへの移行は、以下の段階的アプローチで実施することを推奨します：

1. **ドメインモデルの純化と再定義**
   - 現行コードからドメインロジックを抽出
   - 新しいドメインモデルを定義

2. **アプリケーションレイヤーの再構築**
   - ユースケースの明確化
   - アプリケーションサービスの実装

3. **インフラストラクチャの段階的置き換え**
   - 新しいリポジトリ実装の作成
   - 外部サービスアダプターの開発

4. **UIの段階的移行**
   - プレゼンターの実装
   - 新しいUI適応レイヤーの構築

### 4.3 ストラングラーフィグパターンの適用

新旧システムの共存を可能にするストラングラーフィグパターンを適用し、リスクを最小化しながら段階的に移行することを推奨します：

- 新機能は新アーキテクチャで開発
- 既存機能は段階的に新アーキテクチャに移行
- 移行中はアダプターで新旧アーキテクチャを連携

## 5. 次のステップ

リブート検討を進めるための次のステップとして、以下のアクションを推奨します：

1. **プロトタイプの開発**
   - 新アーキテクチャの基本構造を実装したプロトタイプの作成
   - 主要ユースケースの1つを実装して検証

2. **移行計画の詳細化**
   - 段階的移行の詳細なロードマップの作成
   - 各フェーズの完了基準と検証方法の定義

3. **開発環境とCI/CDパイプラインの整備**
   - 新アーキテクチャをサポートする開発環境の構築
   - テスト自動化とデプロイパイプラインの整備

4. **チーム内知見の共有**
   - 新アーキテクチャに関するワークショップの開催
   - ドキュメントとコーディング規約の整備

## 6. 結論

jikanicleプロジェクトのリブート検討を通じて、現在の技術的課題を解決し、核となる機能要件を効果的に実現するための方向性が明確になりました。本質に立ち返り、シンプルさと拡張性のバランスを取ったアーキテクチャへの移行により、プロジェクトの持続可能な発展が期待できます。

提案した段階的なアプローチにより、リスクを最小化しながら新アーキテクチャへの移行を進めることが可能です。また、明確に定義された核機能に集中することで、ユーザー価値を効果的に提供しながらも、保守性と拡張性の高いシステムを構築できると考えます。

## 関連ドキュメント

- [アーキテクチャ概要](../../architecture/overview.md)
- [ドメインモデル設計](../../design/domain-model.md)
- [タスク管理ドメイン設計](../../domain/task/design.md)
- [設計計画](../../design/jikanicle_設計計画.md)
- [核となる機能要件分析](./core-requirements-analysis.md)
- [核となる機能要件・仕様](./core-features-requirements.md)
- [アーキテクチャ再設計提案](./architecture-redesign-proposal.md)