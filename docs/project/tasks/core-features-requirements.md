# jicanicle 核となる機能要件・仕様

## 更新履歴

| 日付 | 更新者 | 内容 |
|------|--------|------|
| 2025-03-10 | 開発チーム | 初版作成：核となる機能要件・仕様の抽出と整理 |

## 1. はじめに

このドキュメントは、既存のjicanicleプロジェクトから核となる機能要件・仕様を抽出し、整理したものです。現在の技術的課題（TUIのテスト困難性、Reactの複雑なコンテキスト依存、過度に複雑化したアーキテクチャ）を踏まえ、実装方法ではなく「何を実現すべきか」という観点で情報を構造化しています。これにより、リブート検討の際の基礎資料として活用できます。

## 2. 核となる価値提案

jicanicleの核となる価値提案は以下の通りです：

**「ユーザーがタスクを入力するだけで、AIが所要時間を予測し、最適なタイムブロックを自動生成。ユーザーは実際の作業時間を計測するだけで、効率的なタイムマネジメントを実現できる」**

この価値提案を実現するための本質的な機能要件を以下に整理します。

## 3. バウンデッドコンテキストと核機能

既存のドキュメントから抽出した4つのバウンデッドコンテキストと、各コンテキストの核となる機能要件を以下に示します。

### 3.1 タスク管理コンテキスト

**本質的な責務**: ユーザーのタスクを管理し、そのライフサイクルを追跡する

#### 核となる機能

1. **タスクの作成・保存**
   - ユーザーがタスク名と説明（オプション）を入力できる
   - 作成したタスクがシステムに永続化される
   - 各タスクには一意のIDが付与される

2. **タスク情報の管理**
   - タスクの基本属性（ID、名前、説明、カテゴリ、状態など）の保持
   - タスクの状態遷移（未開始→進行中→完了）の管理
   - タスクの予測時間と実績時間の管理

3. **タスクの検索・フィルタリング**
   - 複数条件（カテゴリ、状態、優先度など）での検索
   - 作成日順、優先度順などでのソート

#### 実現に不可欠な機能

- タスクデータの永続化と読み込み
- タスク状態の更新機能
- タスクのCRUD操作のインターフェース

### 3.2 タイムブロッキングコンテキスト

**本質的な責務**: タスクをスケジュール上の時間枠に最適に配置する

#### 核となる機能

1. **タイムブロックの自動生成**
   - タスクの予測時間に基づいて最適なタイムブロックを生成
   - ユーザーが指定した時間枠（例：9:00-17:00）内に収まるようスケジュール
   - タスク間に適切な休憩を挿入

2. **スケジュールの視覚化**
   - 生成されたタイムブロックをタイムライン形式で表示
   - 現在のタイムブロックを強調表示
   - タスクのカテゴリごとに色分け表示

3. **スケジュールの調整**
   - タイムブロックの手動での調整（開始時間の変更など）
   - スケジュールのリバランス（空き時間の最適活用）

#### 実現に不可欠な機能

- スケジュール生成アルゴリズム
- タイムブロックとタスクの関連付け
- タイムブロックデータの永続化

### 3.3 タイムトラッキングコンテキスト

**本質的な責務**: タスクの実行時間を記録し、予測と実績を比較可能にする

#### 核となる機能

1. **タスク実行の時間計測**
   - タスク開始・一時停止・再開・完了の操作
   - 実行中タスクの経過時間のリアルタイム表示
   - 休憩時間の記録

2. **実績データの記録**
   - 実際の所要時間の記録と保存
   - 予測時間と実績時間の差異の計算
   - タスク完了時の統計情報の提供

3. **分析とレポート**
   - カテゴリ別の時間配分の分析
   - 予測精度の統計（カテゴリ別、時間帯別など）
   - 生産性傾向の可視化

#### 実現に不可欠な機能

- タイマー機能
- トラッキングセッションの管理
- セッションと休憩の記録と計算

### 3.4 AI予測コンテキスト

**本質的な責務**: タスクの所要時間とカテゴリを予測し、学習によって精度を向上させる

#### 核となる機能

1. **タスク所要時間の予測**
   - タスク名と説明からの所要時間予測
   - 過去の類似タスクからの学習に基づく予測
   - 予測の信頼度レベルの提供

2. **タスクカテゴリの予測**
   - タスク名と説明からのカテゴリ分類
   - ユーザーパターンに基づくカテゴリ推奨

3. **フィードバックループと学習**
   - 予測結果に対するユーザーフィードバックの収集
   - 実績データを基にした予測モデルの更新
   - ユーザー固有のパターン学習

#### 実現に不可欠な機能

- 予測アルゴリズム
- フィードバックデータの管理
- モデル更新メカニズム

## 4. コンテキスト間の本質的な連携

各バウンデッドコンテキスト間の連携における本質的な要素は以下の通りです：

### 4.1 タスク管理 ↔ タイムブロッキング

- **連携の本質**: タスクの基本情報とタイムブロックの紐付け
- **必要な情報交換**:
  - タスク管理からタイムブロッキングへ: タスクID、名前、予測時間、優先度
  - タイムブロッキングからタスク管理へ: スケジュール状態（予定/進行中/完了）

### 4.2 タスク管理 ↔ タイムトラッキング

- **連携の本質**: タスクの実行状態と実績時間の管理
- **必要な情報交換**:
  - タスク管理からタイムトラッキングへ: タスクID、名前、予測時間
  - タイムトラッキングからタスク管理へ: 実績時間、状態変更

### 4.3 タスク管理 ↔ AI予測

- **連携の本質**: タスク情報に基づく予測と、予測結果の適用
- **必要な情報交換**:
  - タスク管理からAI予測へ: タスク名、説明
  - AI予測からタスク管理へ: 予測時間、推奨カテゴリ、信頼度

### 4.4 タイムトラッキング ↔ AI予測

- **連携の本質**: 実績データを基にした予測モデルの改善
- **必要な情報交換**:
  - タイムトラッキングからAI予測へ: タスクID、実績時間、ユーザーフィードバック
  - AI予測からタイムトラッキングへ: 予測精度の統計情報

## 5. ユーザー体験の本質

効果的なタイムマネジメントを実現するためのjicanicleの本質的なユーザー体験は以下の通りです：

### 5.1 シンプルな操作フロー

1. **タスク入力**: ユーザーはタスク名と説明（オプション）を入力するだけで良い
2. **予測と分類**: システムが自動的に所要時間を予測し、カテゴリを提案
3. **スケジュール確認**: 生成されたタイムブロックをタイムライン上で確認
4. **タスク実行**: 開始・停止・完了などのシンプルな操作でタスクを実行
5. **フィードバック**: 必要に応じて予測に対するフィードバックを提供

### 5.2 本質的なインタラクションモデル

- **最小限の入力で最大の価値**: ユーザー入力を最小限に抑え、AIが支援
- **非同期操作**: タスク入力と実行が異なるタイミングでも問題なく機能
- **継続的な学習**: 使用するほどに精度が向上する自己改善システム
- **コンテキスト認識**: 現在の作業状況を理解し、適切なアクションを提案

## 6. 核となる機能セットと最小実装モデル

jicanicleの本質的な価値を実現するための最小実装モデル（Minimum Viable Product）を以下に示します：

### 6.1 必須機能（MVP）

1. **基本的なタスク管理**
   - タスク作成・編集・削除
   - タスク状態管理（未開始/進行中/完了）
   - 基本的なタスク属性（名前、説明、カテゴリ、予測時間）

2. **シンプルなAI予測機能**
   - タスク名からの所要時間予測
   - 基本的なカテゴリ分類
   - ユーザーフィードバックの収集

3. **基本的なタイムブロッキング**
   - 予測時間に基づくタイムブロック生成
   - シンプルなタイムライン表示
   - 現在のタスクのハイライト

4. **基本的なタイムトラッキング**
   - タスク開始・完了の記録
   - 実績時間の計測と保存
   - 予測と実績の簡易比較

### 6.2 拡張機能（段階的に追加）

1. **高度なタスク管理**
   - タグやラベルによる詳細分類
   - 優先度の設定と管理
   - 依存関係の定義

2. **高度なAI予測**
   - コンテキスト認識型の予測
   - ユーザー固有パターンの学習
   - 複数要素を考慮した信頼度計算

3. **高度なタイムブロッキング**
   - 制約条件に基づく最適化
   - ドラッグアンドドロップによる調整
   - 複数日程のスケジュール管理

4. **高度なタイムトラッキング**
   - 詳細な分析とレポート
   - 休憩時間の自動検出
   - 生産性パターンの分析

## 7. アーキテクチャ再設計の方向性

現在の技術的課題を解決し、核となる機能要件を効果的に実現するための再設計の方向性を以下に示します：

### 7.1 ドメインモデルの純化

- 各バウンデッドコンテキストの責務を明確に分離
- 最小限のデータモデルと操作に集中
- コンテキスト間の依存関係を明示的かつ最小限に

### 7.2 インターフェースの最小化

- 各コンテキスト間の連携インターフェースを最小限に定義
- 明確なコントラクトとデータ形式の確立
- 実装詳細からの独立性確保

### 7.3 技術選択の柔軟性

- UIレイヤーの実装技術からの独立
- ストレージメカニズムの抽象化
- AIコンポーネントの実装方法を柔軟に変更可能に

## 8. まとめ

jicanicleプロジェクトの本質的な価値は、「AI支援によるシンプルかつ効果的なタイムマネジメント」にあります。本ドキュメントでは、この価値を実現するための核となる機能要件を抽出し、実装方法に依存しない形で整理しました。

リブートに際しては、これらの本質的な機能要件に集中し、現在の技術的課題を解決する方向での再設計が望ましいと考えられます。特に、各バウンデッドコンテキストの責務を明確にし、それらの連携を最小化することで、よりシンプルで保守性の高いアーキテクチャを実現できるでしょう。

## 関連ドキュメント

- [アーキテクチャ概要](../../architecture/overview.md)
- [ドメインモデル設計](../../design/domain-model.md)
- [タスク管理ドメイン設計](../../domain/task/design.md)
- [設計計画](../../design/jikanicle_設計計画.md)
- [核となる機能要件分析](./core-requirements-analysis.md)